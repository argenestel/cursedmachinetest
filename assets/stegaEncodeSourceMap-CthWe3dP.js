import{ci as v}from"./index-COQjmB9B.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ecaef840-0278-4164-ada8-e083fe41a6c8",e._sentryDebugIdIdentifier="sentry-dbid-ecaef840-0278-4164-ada8-e083fe41a6c8")}catch{}})();const x=/_key\s*==\s*['"](.*)['"]/;function J(e){return typeof e=="string"?x.test(e.trim()):typeof e=="object"&&"_key"in e}function T(e){if(!Array.isArray(e))throw new Error("Path is not an array");return e.reduce((t,n,r)=>{const o=typeof n;if(o==="number")return`${t}[${n}]`;if(o==="string")return`${t}${r===0?"":"."}${n}`;if(J(n)&&n._key)return`${t}[_key=="${n._key}"]`;if(Array.isArray(n)){const[s,a]=n;return`${t}[${s}:${a}]`}throw new Error(`Unsupported path segment \`${JSON.stringify(n)}\``)},"")}const j={"\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","'":"\\'","\\":"\\\\"},I={"\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	","\\'":"'","\\\\":"\\"};function V(e){return`$${e.map(t=>typeof t=="string"?`['${t.replace(/[\f\n\r\t'\\]/g,n=>j[n])}']`:typeof t=="number"?`[${t}]`:t._key!==""?`[?(@._key=='${t._key.replace(/['\\]/g,n=>j[n])}')]`:`[${t._index}]`).join("")}`}function P(e){const t=[],n=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;let r;for(;(r=n.exec(e))!==null;){if(r[1]!==void 0){const o=r[1].replace(/\\(\\|f|n|r|t|')/g,s=>I[s]);t.push(o);continue}if(r[2]!==void 0){t.push(parseInt(r[2],10));continue}if(r[3]!==void 0){const o=r[3].replace(/\\(\\')/g,s=>I[s]);t.push({_key:o,_index:-1});continue}}return t}function D(e){return e.map(t=>{if(typeof t=="string"||typeof t=="number")return t;if(t._key!=="")return{_key:t._key};if(t._index!==-1)return t._index;throw new Error(`invalid segment:${JSON.stringify(t)}`)})}function G(e){return e.map(t=>{if(typeof t=="string"||typeof t=="number")return t;if(t._index!==-1)return t._index;throw new Error(`invalid segment:${JSON.stringify(t)}`)})}function K(e,t){if(!(t!=null&&t.mappings))return;const n=V(G(e));if(t.mappings[n]!==void 0)return{mapping:t.mappings[n],matchedPath:n,pathSuffix:""};const r=Object.entries(t.mappings).filter(([p])=>n.startsWith(p)).sort(([p],[f])=>f.length-p.length);if(r.length==0)return;const[o,s]=r[0],a=n.substring(o.length);return{mapping:s,matchedPath:o,pathSuffix:a}}function z(e){return e!==null&&Array.isArray(e)}function U(e){return typeof e=="object"&&e!==null}function $(e,t,n=[]){return z(e)?e.map((r,o)=>{if(U(r)){const s=r._key;if(typeof s=="string")return $(r,t,n.concat({_key:s,_index:o}))}return $(r,t,n.concat(o))}):U(e)?Object.fromEntries(Object.entries(e).map(([r,o])=>[r,$(o,t,n.concat(r))])):t(e,n)}function B(e,t,n){return $(e,(r,o)=>{if(typeof r!="string")return r;const s=K(o,t);if(!s)return r;const{mapping:a,matchedPath:p}=s;if(a.type!=="value"||a.source.type!=="documentValue")return r;const f=t.documents[a.source.document],u=t.paths[a.source.path],y=P(p),h=P(u).concat(o.slice(y.length));return n({sourcePath:h,sourceDocument:f,resultPath:o,value:r})})}const E="drafts.";function H(e){return e.startsWith(E)?e.slice(E.length):e}function X(e){const{baseUrl:t,workspace:n="default",tool:r="default",id:o,type:s,path:a,projectId:p,dataset:f}=e;if(!t)throw new Error("baseUrl is required");if(!a)throw new Error("path is required");if(!o)throw new Error("id is required");if(t!=="/"&&t.endsWith("/"))throw new Error("baseUrl must not end with a slash");const u=n==="default"?void 0:n,y=r==="default"?void 0:r,h=H(o),_=Array.isArray(a)?T(D(a)):a,i=new URLSearchParams({baseUrl:t,id:h,type:s,path:_});u&&i.set("workspace",u),y&&i.set("tool",y),p&&i.set("projectId",p),f&&i.set("dataset",f),o.startsWith(E)&&i.set("isDraft","");const b=[t==="/"?"":t];u&&b.push(u);const c=["mode=presentation",`id=${h}`,`type=${s}`,`path=${encodeURIComponent(_)}`];return y&&c.push(`tool=${y}`),b.push("intent","edit",`${c.join(";")}?${i}`),b.join("/")}function F(e){let t=typeof e=="string"?e:e.baseUrl;return t!=="/"&&(t=t.replace(/\/$/,"")),typeof e=="string"?{baseUrl:t}:{...e,baseUrl:t}}const m=({sourcePath:e,resultPath:t,value:n})=>{if(Y(n)||Z(n))return!1;const r=e.at(-1);return!(e.at(-2)==="slug"&&r==="current"||typeof r=="string"&&r.startsWith("_")||typeof r=="number"&&e.at(-2)==="marks"||r==="href"&&typeof e.at(-2)=="number"&&e.at(-3)==="markDefs"||r==="style"||r==="listItem"||e.some(o=>o==="meta"||o==="metadata"||o==="openGraph"||o==="seo")||A(e)||A(t)||typeof r=="string"&&Q.has(r))},Q=new Set(["color","colour","currency","email","format","gid","hex","href","hsl","hsla","icon","id","index","key","language","layout","link","linkAction","locale","lqip","page","path","ref","rgb","rgba","route","secret","slug","status","tag","template","theme","type","unit","url","username","variant","website"]);function Y(e){return/^\d{4}-\d{2}-\d{2}/.test(e)?!!Date.parse(e):!1}function Z(e){try{new URL(e,e.startsWith("/")?"https://acme.com":void 0)}catch{return!1}return!0}function A(e){return e.some(t=>typeof t=="string"&&t.match(/type/i)!==null)}const w=20;function tt(e,t,n){var r,o,s,a,p,f,u,y,h;const{filter:_,logger:i,enabled:b}=n;if(!b){const l="config.enabled must be true, don't call this function otherwise";throw(r=i?.error)==null||r.call(i,`[@sanity/client]: ${l}`,{result:e,resultSourceMap:t,config:n}),new TypeError(l)}if(!t)return(o=i?.error)==null||o.call(i,"[@sanity/client]: Missing Content Source Map from response body",{result:e,resultSourceMap:t,config:n}),e;if(!n.studioUrl){const l="config.studioUrl must be defined";throw(s=i?.error)==null||s.call(i,`[@sanity/client]: ${l}`,{result:e,resultSourceMap:t,config:n}),new TypeError(l)}const c={encoded:[],skipped:[]},C=B(e,t,({sourcePath:l,sourceDocument:g,resultPath:k,value:d})=>{if((typeof _=="function"?_({sourcePath:l,resultPath:k,filterDefault:m,sourceDocument:g,value:d}):m({sourcePath:l,resultPath:k,filterDefault:m,sourceDocument:g,value:d}))===!1)return i&&c.skipped.push({path:R(l),value:`${d.slice(0,w)}${d.length>w?"...":""}`,length:d.length}),d;i&&c.encoded.push({path:R(l),value:`${d.slice(0,w)}${d.length>w?"...":""}`,length:d.length});const{baseUrl:S,workspace:L,tool:O}=F(typeof n.studioUrl=="function"?n.studioUrl(g):n.studioUrl);if(!S)return d;const{_id:W,_type:N,_projectId:M,_dataset:q}=g;return v(d,{origin:"sanity.io",href:X({baseUrl:S,workspace:L,tool:O,id:W,type:N,path:l,...!n.omitCrossDatasetReferenceData&&{dataset:q,projectId:M}})},!1)});if(i){const l=c.skipped.length,g=c.encoded.length;if((l||g)&&((a=i?.groupCollapsed||i.log)==null||a("[@sanity/client]: Encoding source map into result"),(p=i.log)==null||p.call(i,`[@sanity/client]: Paths encoded: ${c.encoded.length}, skipped: ${c.skipped.length}`)),c.encoded.length>0&&((f=i?.log)==null||f.call(i,"[@sanity/client]: Table of encoded paths"),(u=i?.table||i.log)==null||u(c.encoded)),c.skipped.length>0){const k=new Set;for(const{path:d}of c.skipped)k.add(d.replace(x,"0").replace(/\[\d+\]/g,"[]"));(y=i?.log)==null||y.call(i,"[@sanity/client]: List of skipped paths",[...k.values()])}(l||g)&&((h=i?.groupEnd)==null||h.call(i))}return C}function R(e){return T(D(e))}var nt=Object.freeze({__proto__:null,stegaEncodeSourceMap:tt});export{B as encodeIntoResult,tt as stegaEncodeSourceMap,nt as stegaEncodeSourceMap$1};
//# sourceMappingURL=stegaEncodeSourceMap-CthWe3dP.js.map
